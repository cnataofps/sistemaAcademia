<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head th:replace="painel :: header">
	<meta charset="UTF-8">
	<title>Alterar Dados</title>
	<!-- Estilos adicionais para modo noturno -->
	<style>
		body.dark-mode .content-area,
		body.dark-mode .container {
			background-color: #1e1e1e;
			color: #e0e0e0;
		}

		body.dark-mode .list-group-item {
			background-color: #2a2a2a;
			color: #e0e0e0;
			border-color: #444;
		}

		body.dark-mode .text-muted {
			color: #b0b0b0 !important;
		}

		body.dark-mode h2 {
			color: #66b2ff;
		}

		body.dark-mode {
			transition: background-color 0.3s ease, color 0.3s ease;
		}

		.list-group-item {
			transition: background-color 0.3s ease, color 0.3s ease;
		}
	</style>


</head>

<body>
	<!-- Navbar -->
	<div th:replace="painel :: navbar"></div>

	<!-- Layout principal -->
	<div class="main-layout">
		<!-- Sidebar -->
		<div th:replace="painel :: sidebar" class="sidebar"></div>

		<!-- Conteúdo -->
		<div class="content-area">
			<h2 class="mb-4"><i class="bi bi-pencil-square me-2"></i>Alterar Dados do Usuário</h2>

			<div th:if="${sucesso}" class="alert alert-success text-center" role="alert">
				<i class="bi bi-check-circle-fill me-1"></i><span th:text="${sucesso}"></span>
			</div>
			<div th:if="${erro}" class="alert alert-danger text-center" role="alert">
				<i class="bi bi-exclamation-triangle-fill me-1"></i><span th:text="${erro}"></span>
			</div>

			<form th:action="@{/usuario/alterar}" method="post">
				<input type="hidden" th:value="${usuario.id}" name="id" />

				<div class="mb-3">
					<label>Nome</label>
					<input type="text" class="form-control" name="nome" th:value="${usuario.nome}" required />
				</div>

				<div class="mb-3">
					<label>Email</label>
					<input type="email" class="form-control" name="email" th:value="${usuario.email}" required />
				</div>

				<div class="mb-3">
					<label>Nova Senha</label>
					<input type="password" class="form-control" name="novaSenha" />
				</div>

				<div class="mb-3">
					<label>Confirmar Nova Senha</label>
					<input type="password" class="form-control" name="confirmarSenha" />
				</div>

				<button type="submit" class="btn btn-primary">Salvar</button>
			</form>

			<!-- Script para mostrar/ocultar senha -->
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
			<script>
				$(document).ready(function () {
					$('.toggle-password').click(function () {
						const input = $($(this).data('target'));
						const icon = $(this).find('i');

						if (input.attr('type') === 'password') {
							input.attr('type', 'text');
							icon.removeClass('bi-eye-fill').addClass('bi-eye-slash-fill');
						} else {
							input.attr('type', 'password');
							icon.removeClass('bi-eye-slash-fill').addClass('bi-eye-fill');
						}
					});
				});
			</script>

			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

			<!-- Script de modo noturno -->
			<script>
				document.addEventListener('DOMContentLoaded', function () {
					const toggle = document.getElementById('toggleDarkMode');
					const body = document.body;

					// Aplica tema salvo
					if (localStorage.getItem('modoNoturno') === 'true') {
						body.classList.add('dark-mode');
					}

					// Ativa/desativa modo noturno
					if (toggle) {
						toggle.addEventListener('click', function () {
							body.classList.toggle('dark-mode');
							localStorage.setItem('modoNoturno', body.classList.contains('dark-mode'));
						});
					}
				});
			</script>
</body>

</html>