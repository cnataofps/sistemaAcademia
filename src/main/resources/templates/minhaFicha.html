<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{painel :: header}">
	<meta charset="UTF-8">
	<title>Fichas de Treinamento do Aluno</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
	<style>
		body {
			background-color: #f8f9fa;
		}

		.card-header {
			background-color: #0d6efd;
			color: white;
		}

		.section-title {
			font-size: 1.4rem;
			font-weight: 600;
			color: #0d6efd;
		}

		.table th {
			background-color: #f1f1f1;
		}

		body.dark-mode {
			background-color: #121212;
			color: #e0e0e0;
		}

		body.dark-mode .card {
			background-color: #2a2a2a;
			color: #e0e0e0;
		}

		body.dark-mode .card-header {
			background-color: #0d6efd;
			color: white;
		}

		body.dark-mode .table {
			color: #e0e0e0;
		}

		body.dark-mode .table th {
			background-color: #333;
			color: #ccc;
		}

		body.dark-mode .section-title {
			color: #66b2ff;
		}
	</style>
</head>

<body>
	<div th:replace="~{painel :: navbar}"></div>
	<div class="main-layout">
		<div th:replace="~{painel :: sidebar}"></div>
		<div class="content-area container py-5">
			<h2 class="mb-4 text-center"><i class="bi bi-person-badge"></i> Minha Ficha de Treinamento</h2>

			<!-- Lista de Fichas -->
			<div th:if="${#lists.isEmpty(fichas) == false}">
				<div th:each="ficha : ${fichas}" class="card shadow-sm mb-5">
					<div class="card-header bg-primary text-white">
						<i class="bi bi-person-badge-fill me-2"></i>Ficha de <span
							th:text="${#temporals.format(ficha.dataCriacao, 'dd/MM/yyyy')}"></span>

					</div>
					<div class="card-body">
						<div class="row g-3 mb-3">
							<div class="col-md-4"><strong>Aluno:</strong> <span th:text="${ficha.aluno.nome}"></span>
							</div>
							<div class="col-md-4"><strong>Matrícula:</strong> <span
									th:text="${ficha.aluno.matricula}"></span></div>
							<div class="col-md-4"><strong>Objetivo:</strong> <span th:text="${ficha.objetivo}"></span>
							</div>
							<div class="col-md-4"><strong>Professor:</strong> <span
									th:text="${ficha.professor.nome}"></span></div>
							<div class="col-md-4"><strong>Troca Prevista:</strong> <span
									th:text="${#temporals.format(ficha.dataTroca, 'dd/MM/yyyy')}"></span></div>
						</div>

						<!-- Treinos da Ficha -->
						<div th:each="treino : ${ficha.treinos}" class="mb-4">
							<h5 class="fw-bold text-primary mb-2" th:text="${treino.nome}"></h5>
							<div class="table-responsive">
								<table class="table table-bordered table-sm">
									<thead>
										<tr>
											<th>Exercício</th>
											<th>Séries</th>
											<th>Repetições</th>
											<th>Carga</th>
											<th>Observação</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="exercicio : ${treino.exercicios}">
											<td th:text="${exercicio.nome}"></td>
											<td th:text="${exercicio.serie}"></td>
											<td th:text="${exercicio.repeticoes}"></td>
											<td th:text="${exercicio.carga}"></td>
											<td th:text="${exercicio.observacao}"></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>

					</div>
				</div>
			</div>

			<!-- Mensagem alternativa -->
			<div th:if="${#lists.isEmpty(fichas)}" class="alert alert-warning text-center mt-4">
				<i class="bi bi-info-circle-fill me-1"></i>
				Nenhuma ficha de treino registrada para você.
			</div>

			<!-- Botão de voltar -->
			<div class="text-center mt-4">
				<a href="/" class="btn btn-outline-secondary btn-lg">
					<i class="bi bi-arrow-left-circle"></i> Voltar ao Painel
				</a>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
			const body = document.body;
			const toggle = document.getElementById('toggleDarkMode');

			if (localStorage.getItem('modoNoturno') === 'true') {
				body.classList.add('dark-mode');
			}

			if (toggle) {
				toggle.addEventListener('click', function () {
					body.classList.toggle('dark-mode');
					localStorage.setItem('modoNoturno', body.classList.contains('dark-mode'));
				});
			}
		});
	</script>

	<!-- RODAPÉ -->
	<div th:replace="fragments/footer :: footer"></div>
</body>

</html>